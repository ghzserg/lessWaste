# Плагин lessWaste для AD5X с ZMOD и OrcaSlicer
## Основан на [bambufy](https://github.com/function3d/bambufy/tree/V1.2.10) AD5X V1.2.10

Изменения по сравнению с bambufy:

- Рутинная процедура старта печати
- Стартовый диалог
- Различные мелкие улучшения
- Обработка больших G‑code файлов
- Рутинная процедура завершения печати

Условия тестирования:
- OrcaSlicer
- Включённые плагины: recommend, lessWaste, notify, timelapse
- Klipper 13
- USB‑камера
- zmod 1.6.6
- recommend 1.1.5
- [AD5X-1.1.7-1.1.0-3.0.6-20250912-Factory](https://github.com/ghzserg/FF/releases/R)
(На мой взгляд, лучшая версия)

*Теоретически должно работать и с Bambu Studio при использовании G‑code от bambufy [bambufy](https://github.com/function3d/bambufy/tree/V1.2.10), но это не тестировалось.
## Установка
- При необходимости выполните даунгрейд прошивки AD5X до версии 1.1.7 (убирает принудительную стартовую рутину).
- Установите zmod, следуя инструкции [instructions](https://github.com/ghzserg/zmod/wiki/Setup).
- Замените штатный дисплей на Guppyscreen, выполнив команду `DISPLAY_OFF`.
- (Опционально) Переключите веб‑интерфейс на Mainsail, выполнив команду `WEB`.
- Выполните команду `ENABLE_EXTRA_PLUGINS` чтобы включить репозиторий внешних плагинов
- Выполните команду `ENABLE_PLUGIN name=lessWaste` в консоли (плагин recommend должен быть включён заранее).
- Используйте файл OrcaSlicer_GCODE.md для настройки OrcaSlicer.

## Удаление
- Выполните команду DISABLE_PLUGIN name=lessWaste.
- (Опционально) Верните штатный экран: DISPLAY_ON.
- (Опционально) Верните Fluidd: WEB.

## Создание меньшего количества отходов
Существует два варианта, и в зависимости от модели один может быть эффективнее другого.

### Вариант 1: Пурж в prime tower
Описание: вместо выдавливания за пределы стола, очистка сопла выполняется в prime tower.

Плюсы:

Учитываются настройки “Flush into object's infill”, “Flush into objects' support” и “flushing volumes”.

Минусы:

Обычно требуется крупный prime tower, занимающий место.

Лучше всего подходит для:

Ситуаций, когда выгодно “вплавлять” очистку в объект.

Примечания:  
Размещение prime tower ближе к зоне резака хорошо работает при использовании “No sparse layers (beta)”.
Сравнивайте варианты по “print time” и “total filament used”.

### Вариант 2: Пурж за пределы стола
Описание: очистка сопла происходит за задней частью принтера, как в стоке, но с большей управляемостью.

Плюсы: Требуется небольшой prime tower. Меньше занимаемая площадь на столе. Учитываются “flushing volumes”.

Минусы: Настройки “Flush into object's infill” и “Flush into objects' support” не уменьшают объём очистки.

Лучше всего подходит для: Моделей, где выгоднее строить маленький prime tower, чем большой на каждом слое.

Примечания: Сравнивайте по “print time” и “total filament used”.

### Бонус:
Если вы начинаете новую печать с тем же филаментом, что и предыдущая (тот же материал уже находится в хотэнде), можно отключить стартовую прочистку командой:

_IFS_VARS same_filament_purge=0

А включить снова — командой:

_IFS_VARS same_filament_purge=1

## Настройки
### Backup
Если функция резервного копирования (backup) включена и в системе присутствуют филаменты одного типа и цвета, они объединяются в группу. Резервные ячейки определяются при запуске и расходуются в процессе печати. Если автоматическое переключение (backup) срабатывает во время печати, активируется канал с наименьшим доступным номером (сканирование идет от 1-го к 4-му). В процессе печати пустые каналы можно пополнять, когда резервные варианты исчерпаны или когда печать поставлена на паузу.

Пример: если филамент 1 закончился, автоматически загрузится филамент 2.

<img width="388" height="414" alt="image" src="https://github.com/user-attachments/assets/80828ebf-00d4-49bc-96d9-16d94ef22158" />

### LEVELING
Описание: выполняет bed mesh leveling в области печати при старте.

### L_PURGE
Описание: создаёт линию очистки перед моделью или сбоку.

Плюсы: быстрее, чем skirt или другие методы первичной очистки.

### IFS
Описание: при отключении филамент остаётся в хотэнде между печатями.

### Dialog
Описание: выводит информацию на экран при возникновении проблем.

### Начальные значения flushing volumes (OrcaSlicer)
Установите multiplier = 1, пересчитайте, затем установите любое значение ниже 90 → в 90.
90 — безопасное значение для давления в сопле.

<img width="352" height="349" alt="volumes2" src="https://github.com/user-attachments/assets/f69af43d-5870-4b64-8b0a-5f2ac25c99b2" />

---
<div align="center">

## [❤️ Поддержите разработку ❤️](https://github.com/sponsors/Hrybmo)
</div>

## Благодарности
- Raúl (function3d) [bambufy](https://github.com/function3d/bambufy)
- Sergei (ghzserg) [zmod](https://github.com/ghzserg/zmod)
